<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="shortcut icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESP32 Rainbow</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LQV48EE2KV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-LQV48EE2KV');
    </script>
    <script>
      function gtag_report_conversion(url) {
        // Set a timeout to ensure navigation happens even if GA fails
        const navigationTimeout = setTimeout(() => {
          if (typeof url !== 'undefined') {
            window.location.href = url;
          }
        }, 1000); // Fallback after 1 second

        try {
          var callback = function () {
            clearTimeout(navigationTimeout);
            if (typeof url !== 'undefined') {
              window.location.href = url;
            }
          };

          gtag('event', 'conversion', {
            'send_to': 'AW-627599899/MGUjCMW13PcZEJvUoasC',
            'value': 20.0,
            'currency': 'USD',
            'event_callback': callback
          });
        } catch (error) {
          // If gtag fails, ensure navigation still happens
          if (typeof url !== 'undefined') {
            window.location.href = url;
          }
        }
        return false;
      }
    </script>  
  </body>
</html>
